<div data-test-institutions-widget>
    <div local-class='InstitutionWidget__title'>
        {{t 'osf-components.institutions-widget.affiliated_institutions'}}
        {{#if (not this.readOnly)}}
            <OsfButton
               data-test-add-institution-button
               aria-label={{t 'general.add'}}
               @type='link'
               @onClick={{action this.showModal}}
            >
                <FaIcon @icon='pencil' />
            </OsfButton>
        {{/if}}
    </div>
    <span>
        <InstitutionsList @node={{@node}} />
    </span>
    {{#if this.shouldShowModal}}
        <BsModal
            @backdropClose={{false}}
        as |modal|>
            <modal.header @closeButton={{false}}>
                <h3 class='modal-title'>
                    {{t 'osf-components.institutions-widget.affiliate_institutions'}}
                </h3>
            </modal.header>
            <modal.body>
                <InstitutionSelectList @model={{this.currentUser.user}} />
            </modal.body>
            <modal.footer>
                <OsfButton @onClick={{action this.closeModal}}>
                    {{t 'general.cancel'}}
                </OsfButton>
                <OsfButton
                    @type='primary'
                    @onClick={{action this.create}}
                >
                    {{t 'general.save'}}
                </OsfButton>
            </modal.footer>
        </BsModal>
    {{/if}}
</div>
